
def 房价建议(房价, 月收入, 地区房价指数):
    # 计算房价收入比
    房价收入比 = 房价 / (月收入 * 12)
    print(地区房价指数)

    # 根据房价收入比和地区房价指数给出建议
    if 房价收入比 > 6:
        return f"房价收入比过高({房价收入比})，可能会对您的财务状况造成压力。建议考虑更便宜的房产或增加首付。"
    elif 房价收入比 > 4:
        return f"房价收入比较高({房价收入比})，可能会影响您的生活质量。建议谨慎评估购房决策。"
    elif 房价收入比 > 2:
        return f"房价收入比适中({房价收入比})，购房压力较小。请确保有足够的应急资金。"
    else:
        return f"房价收入比({房价收入比})在安全范围内，购房压力较小。"

def 首付建议(首付, 房价, 地区首付比例要求):
    if (首付/房价)*100 < 地区首付比例要求:
        return (f"首付比例低于当地要求,可能需要额外的贷款支持。建议增加首付比例或考虑公积金贷款。")
    elif (首付/房价)*100 > 70:
        return (f"首付比例非常高。考虑到中国房价的上涨趋势,可以适当降低首付,将部分资金用于其他投资。")
    else:
        return (f"首付比例合理,符合大多数城市的要求。")

def 月供建议(月供, 月收入, 公积金, 地区月供收入比上限):
    if (月供/(月收入+公积金))*100 > 地区月供收入比上限:
        return (f"月供收入比过高,远超安全线。极可能影响生活质量,建议选择更低价位房产或大幅增加首付。")
    elif (月供/(月收入+公积金))*100 > 50:
        return (f"月供收入比较高,接近安全线。可能影响生活质量,建议增加首付或考虑更低价位房产。")
    elif (月供/(月收入+公积金))*100 > 30:
        return (f"月供收入比适中,但仍需注意控制其他开支。请确保有足够的应急资金。")
    else:
        return (f"月供收入比在安全范围内,还款压力相对较小。")

def 购房对比不购房建议(购房与不购房资金差异, 地区房价增长预期):
    if 购房与不购房资金差异 > 100*10000:
        return (f"从长期来看,购房决策可能显著有利于资产积累。但请注意,这可能基于房价持续上涨的假设。")
    elif 购房与不购房资金差异 > 0:
        return (f"从长期来看,购房决策可能略有利于资产积累。但差异不大,请权衡房产的其他价值。")
    else:
        return (f"从长期来看,不购房可能更有利于资金积累。请权衡房产的非金融价值与其他投资机会。")

def 失业建议(失业后最低月结余, 地区失业率):
    if 失业后最低月结余 < -5000:
        return (f"失业后最低月结余 {失业后最低月结余:.2f}元。失业后可能出现严重资金短缺,建议大幅增加应急储备或考虑更低的房价。")
    elif 失业后最低月结余 < 0:
        return (f"失业后最低月结余 {失业后最低月结余:.2f}元。失业后可能出现轻微资金短缺,建议适当增加应急储备或考虑稍低的房价。")
    else:
        return (f"失业后最低月结余 {失业后最低月结余:.2f}元。即使失业后,您仍有能力维持基本生活,财务风险相对可控。")

def 资金风险提示(最低资金池, 房贷年限, 购房与不购房资金差异, 地区经济增长预期):
    if 最低资金池 > 0:
        return (f"基于当前假设,您的购房决策在未来{房贷年限}年内不会对生活造成严重影响。")
    else:
        return (f"警告:基于当前假设,您的购房决策可能会在未来{房贷年限}年内对生活造成较大影响。建议重新考虑购房计划或增加应急储备金。")

    if 购房与不购房资金差异 > 0:
        return (f"购房决策使您的资金增加了{购房与不购房资金差异/10000:.2f}万元")
    else:
        return (f"购房决策使您的资金减少了{-购房与不购房资金差异/10000:.2f}万元")

def 购房成本(房价, 交房时间, 首付, 月供, 月收入, 公积金, 房贷年限):
    return (f"""
    房产购入价值: {房价/10000} 万元（{交房时间} 个月交房）
    首付比例: {(首付/房价)*100:.2f}%
    首付金额: {首付/10000} 万元
    月供收入比: {(月供/(月收入+公积金))*100:.2f}%
    房贷年限: {房贷年限} 年""")

def 卖房收益(房价, 首付, 房产增值率, 月供列表, 租房费用列表, 交房时间, 卖出时间, 是否卖出房产):
    # 计算总房贷支出和总租金支出
    总房贷支出 = sum(月供列表)
    总租金支出 = sum(租房费用列表)
    买房总投入 = 首付 + 总房贷支出
    # 计算买房带来的实际盈利或亏损
    if 是否卖出房产:
        房产最终价值 = 房价 * (1 + 房产增值率)
        如果卖房 = (f"在第 {round((交房时间 + 卖出时间)/12)} 年以 {房产最终价值/10000:.2f} 万元卖出")
    else:
        房产最终价值 = 房价  # 如果没有卖出，使用原始房价
        如果卖房 = "并持有到模拟期结束"
    买房总收益 = 房产最终价值 - 首付 - 总房贷支出 + 总租金支出
    买房盈亏 = 买房总收益 - 买房总投入
    if 买房盈亏 > 0:
        买房决策盈亏 = (f"盈利 {买房盈亏/10000:.2f} 万元")
    else:
        买房决策盈亏 = (f"亏损 {买房盈亏/10000:.2f} 万元")

    return (f"""
    如果卖房: {如果卖房}
    总房贷支出: {总房贷支出/10000:.2f}万元
    买房总投入: {买房总投入/10000:.2f}万元
    买房总收益: {买房总收益/10000:.2f}万元
    买房决策盈亏: {买房决策盈亏}
    总租房支出: {总租金支出/10000:.2f}万元""")

def 购房对比不购房资金池最终值(资金池, 无购房资金池):
    return (f"购房 {资金池[-1]/10000:.2f} 万元 - 不购房 {无购房资金池[-1]/10000:.2f} 万元 = {(资金池[-1] - 无购房资金池[-1])/10000:.2f} 万元")

